<!DOCTYPE html>
<html>
<head>
    <title>Baseball Field - Move Fielders</title>
    <style>
        body { text-align: center; font-family: Arial; }
        canvas { border: 1px solid #000; margin-top: 20px; }
        button { margin: 5px; padding: 5px 10px; }
        #status { font-weight: bold; margin-top: 10px; }
    </style>
</head>
<body>
    <h2>Move the Fielders</h2>
    <button onclick="generateScenario()">Generate Scenario</button>
    <div style="margin-top:10px">
        <div><strong>Runners:</strong> <span id="runnerLabel"></span></div>
        <div><strong>Where It's Hit:</strong> <span id="hitLabel"></span></div>
    </div>
    <canvas id="field" width="600" height="600"></canvas>
    <br>
    <button onclick="resetPositions()">Reset Positions</button>
    <button id="resetCutoffButton" onclick="resetCutoff()" style="display:none">Reset Cut-Off</button>
    <div id="status">Select the Cut-Off</div>

    <script>
        const canvas = document.getElementById("field");
        const ctx = canvas.getContext("2d");
        const statusDiv = document.getElementById("status");
        const resetCutoffButton = document.getElementById("resetCutoffButton");
        const runnerLabel = document.getElementById("runnerLabel");
        const hitLabel = document.getElementById("hitLabel");

        const scenarios = [
            { runners: "No One on Base", hit: "Single To Left" },
            { runners: "Runner on First", hit: "Single To Left" },
            { runners: "Runner on Second", hit: "Single To Left" },
            { runners: "Runners on First and Second", hit: "Single To Left" },
            { runners: "No One on Base", hit: "Single To Center" },
            { runners: "Runner on First", hit: "Single To Center" },
            { runners: "Runner on Second", hit: "Single To Center" },
            { runners: "Runners on First and Second", hit: "Single To Center" },
            { runners: "No One on Base", hit: "Single To Right" },
            { runners: "Runner on First", hit: "Single To Right" },
            { runners: "Runner on Second", hit: "Single To Right" },
            { runners: "Runners on First and Second", hit: "Single To Right" },
            { runners: "No One on Base", hit: "Extra Base Hit Left-Center" },
            { runners: "Runner on First", hit: "Extra Base Hit Left-Center" },
            { runners: "No One on Base", hit: "Extra Base Hit Right-Center" },
            { runners: "Runner on First", hit: "Extra Base Hit Right-Center" },
            { runners: "Runner on Third", hit: "Fly Ball To Left" },
            { runners: "Runner on Third", hit: "Fly Ball To Right" }
        ];

        function generateScenario() {
            const random = scenarios[Math.floor(Math.random() * scenarios.length)];
            runnerLabel.textContent = random.runners;
            hitLabel.textContent = random.hit;
        }

        const fielders = [
            {x: 299.5, y: 492.671875, label: "C"},
            {x: 300.5, y: 360.671875, label: "P"},
            {x: 411.5, y: 344.671875, label: "1B"},
            {x: 181.5, y: 338.671875, label: "3B"},
            {x: 375.5, y: 273.671875, label: "2B"},
            {x: 224.5, y: 267.671875, label: "SS"},
            {x: 139.5, y: 200.671875, label: "LF"},
            {x: 299.5, y: 158.671875, label: "CF"},
            {x: 466.5, y: 202.671875, label: "RF"}
        ];

        const startPositions = fielders.map(f => ({x: f.x, y: f.y}));
        let dragging = null;
        let cutoffIndex = null;

        function drawField() {
            ctx.clearRect(0, 0, canvas.width, canvas.height);
            ctx.beginPath();
            ctx.moveTo(300, 500);
            ctx.lineTo(400, 400);
            ctx.lineTo(300, 300);
            ctx.lineTo(200, 400);
            ctx.closePath();
            ctx.strokeStyle = "black";
            ctx.lineWidth = 1;
            ctx.stroke();

            [[300,500],[400,400],[300,300],[200,400]].forEach(([x,y]) => {
                ctx.beginPath();
                ctx.rect(x-5, y-5, 10, 10);
                ctx.fillStyle = "black";
                ctx.fill();
            });

            ctx.beginPath();
            ctx.arc(300, 400, 5, 0, 2 * Math.PI);
            ctx.fill();

            ctx.beginPath();
            ctx.arc(300, 500, 300, Math.PI, 2*Math.PI);
            ctx.stroke();
        }

        function draw() {
            drawField();
            
            fielders.forEach((f, i) => {
                ctx.beginPath();
                ctx.moveTo(startPositions[i].x, startPositions[i].y);
                ctx.lineTo(f.x, f.y);
                ctx.strokeStyle = "red";
                ctx.lineWidth = 1;
                ctx.stroke();
            });

            fielders.forEach((f, i) => {
                ctx.beginPath();
                ctx.arc(f.x, f.y, 8, 0, 2 * Math.PI);
                ctx.fillStyle = "blue";
                ctx.fill();
                ctx.strokeStyle = "black";
                ctx.stroke();

                ctx.fillStyle = "white";
                ctx.font = "10px Arial";
                ctx.textAlign = "center";
                ctx.textBaseline = "middle";
                ctx.fillText(f.label, f.x, f.y);

                if (cutoffIndex === i) {
                    ctx.strokeStyle = "orange";
                    ctx.lineWidth = 3;
                    ctx.strokeRect(f.x - 10, f.y - 10, 20, 20);
                }
            });
        }

        function resetPositions() {
            fielders.forEach((f, i) => {
                f.x = startPositions[i].x;
                f.y = startPositions[i].y;
            });
            cutoffIndex = null;
            updateStatus();
            draw();
        }

        function resetCutoff() {
            cutoffIndex = null;
            updateStatus();
            draw();
        }

        function updateStatus() {
            if (cutoffIndex === null) {
                statusDiv.innerText = "Select the Cut-Off";
                resetCutoffButton.style.display = "none";
            } else {
                statusDiv.innerText = "Cut-Off selected: " + fielders[cutoffIndex].label;
                resetCutoffButton.style.display = "inline";
            }
        }

        canvas.addEventListener("mousedown", (e) => {
            const rect = canvas.getBoundingClientRect();
            const mx = e.clientX - rect.left;
            const my = e.clientY - rect.top;

            if (cutoffIndex === null) {
                fielders.forEach((f, i) => {
                    const dx = mx - f.x;
                    const dy = my - f.y;
                    if (dx*dx + dy*dy < 64) {
                        cutoffIndex = i;
                        updateStatus();
                        draw();
                    }
                });
            } else {
                fielders.forEach((f, i) => {
                    const dx = mx - f.x;
                    const dy = my - f.y;
                    if (dx*dx + dy*dy < 64) dragging = i;
                });
            }
        });

        canvas.addEventListener("mousemove", (e) => {
            if (dragging == null) return;
            const rect = canvas.getBoundingClientRect();
            fielders[dragging].x = e.clientX - rect.left;
            fielders[dragging].y = e.clientY - rect.top;
            draw();
        });

        canvas.addEventListener("mouseup", () => dragging = null);
        canvas.addEventListener("mouseleave", () => dragging = null);

        updateStatus();
        draw();
    </script>
</body>
</html>
